<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>رسالة صباحية لمنار</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet" />
<style>
  body, html {
    height: 100%;
    margin:0; padding:0;
    font-family: 'Tajawal', sans-serif;
    background: linear-gradient(135deg, #ffe6f0cc 30%, #fff0f6cc 90%);
    color: #5a2e3b;
    direction: rtl;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }
  .container {
    background: #fff0f6cc;
    max-width: 700px;
    width: 90%;
    padding: 30px 35px;
    border-radius: 25px;
    box-shadow: 0 20px 50px rgba(179, 57, 90, 0.25);
    position: relative;
    user-select: none;
  }
  h1 {
    text-align: center;
    font-weight: 900;
    color: #b3395a;
    font-size: 32px;
    margin-bottom: 10px;
    text-shadow: 1px 1px 4px rgba(179, 57, 90, 0.3);
  }
  #welcomeName {
    font-weight: 700;
    font-size: 24px;
    text-align: center;
    margin-bottom: 18px;
    color: #8a3851;
  }
  .message-box {
    background: #fff4fb;
    border-radius: 20px;
    padding: 25px 30px;
    font-size: 20px;
    line-height: 1.8;
    color: #633750;
    box-shadow: inset 0 0 15px #ffc9dd;
    min-height: 180px;
    text-align: justify;
    position: relative;
    overflow: hidden;
  }
  .fadeInOut {
    animation: fadeInOut 6s ease forwards;
  }
  @keyframes fadeInOut {
    0% {opacity: 0; transform: translateY(10px);}
    10%, 90% {opacity: 1; transform: translateY(0);}
    100% {opacity: 0; transform: translateY(-10px);}
  }
  button {
    display: block;
    margin: 30px auto 0 auto;
    padding: 14px 30px;
    font-size: 18px;
    font-weight: 700;
    color: white;
    background: linear-gradient(135deg, #d74a7e, #a33258);
    border: none;
    border-radius: 20px;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(179, 57, 90, 0.6);
    transition: transform 0.3s ease;
    user-select: none;
  }
  button:hover {
    transform: scale(1.1);
  }
  #inputNameContainer {
    margin: 20px auto 15px auto;
    max-width: 320px;
    text-align: center;
  }
  #inputName {
    width: 100%;
    padding: 12px 18px;
    font-size: 18px;
    border-radius: 18px;
    border: 2px solid #b3395a;
    outline: none;
    transition: border-color 0.3s ease;
  }
  #inputName:focus {
    border-color: #d74a7e;
    box-shadow: 0 0 8px #d74a7eaa;
  }
  #hearts {
    position: absolute;
    top: 8px;
    left: 8px;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: visible;
    z-index: 0;
  }
  .heart {
    position: absolute;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 35% 35%, #fff8, #ff7a9b);
    filter: drop-shadow(0 0 3px #ff6299cc);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    clip-path: polygon(50% 15%, 84% 43%, 79% 81%, 50% 99%, 21% 81%, 16% 43%);
    animation: floatUp 6s linear infinite;
    opacity: 0.9;
  }
  @keyframes floatUp {
    0% {transform: translateY(0) scale(0.6); opacity: 0.9;}
    50% {opacity: 0.5;}
    100% {transform: translateY(-250px) scale(1); opacity: 0;}
  }
</style>
</head>
<body>
  <div class="container" role="main" aria-label="رسالة صباحية لمنار">
    <h1>صباح الخير يا منار 💖</h1>
    <div id="welcomeName" aria-live="polite" aria-atomic="true"></div>

    <div class="message-box" id="messageBox" aria-live="polite" aria-atomic="true">
      <!-- الرسائل هتظهر هنا -->
    </div>

    <div id="inputNameContainer" style="display:none;">
      <label for="inputName" style="font-weight:700; font-size:18px; color:#a33a5a; margin-bottom:8px; display:block;">اكتبي اسمك هنا عشان أرحب بيكي بطريقة أحلى:</label>
      <input type="text" id="inputName" placeholder="اسمك الجميل" autocomplete="off" />
      <button id="saveNameBtn" style="margin-top:12px;">احفظ اسمي</button>
    </div>

    <button id="newMsgBtn" aria-label="شوف رسالة جديدة">شوف رسالة جديدة 💌</button>

    <div id="hearts"></div>
  </div>

<script>
  // مجموعة الرسائل باللهجة المصرية (ممكن تزودهم أو تعدل فيهم بسهولة)
  const messages = [
    "يا منار، وجودك في حياتي هو أجمل هدية ربنا ممكن يديني إياها، صباحك سعيد يا حبيبة قلبي.",
    "كل يوم بيعدي بحس قد إيه أنا محظوظ لأنك جنبي، ربنا يخليكي ليّا دايمًا.",
    "النهاردة يوم جديد وأتمنى يكون مليان ضحك وحب وسعادة ليكي ولقلوبنا.",
    "بحبك فوق ما الكلمات تعبر، وإنتي أجمل حاجة حصلتلي في الدنيا.",
    "مع كل شروق شمس، بحس إن حياتي بتبدأ من جديد وأنتي فيها أحلى بداية.",
  ];

  // عنصر عرض الرسائل واسم منار
  const messageBox = document.getElementById('messageBox');
  const welcomeName = document.getElementById('welcomeName');
  const inputNameContainer = document.getElementById('inputNameContainer');
  const inputName = document.getElementById('inputName');
  const saveNameBtn = document.getElementById('saveNameBtn');
  const newMsgBtn = document.getElementById('newMsgBtn');
  const heartsContainer = document.getElementById('hearts');

  // وظيفة إنشاء قلوب متحركة
  function createHearts(count = 15) {
    heartsContainer.innerHTML = '';
    const colors = ['#ffacc1', '#ff88a2', '#ff5d7f', '#ff2a53', '#ff3d6b'];
    for(let i = 0; i < count; i++) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      const size = 12 + Math.random() * 18;
      heart.style.width = heart.style.height = size + 'px';
      heart.style.left = (Math.random() * 100) + '%';
      heart.style.top = (70 + Math.random() * 30) + '%';
      heart.style.backgroundImage = `radial-gradient(circle at 35% 35%, #fff8, ${colors[i % colors.length]})`;
      heart.style.animationDuration = (4 + Math.random() * 5) + 's';
      heart.style.transform = `translateY(0) rotate(${Math.random()*40-20}deg)`;
      heartsContainer.appendChild(heart);
    }
  }

  // دالة عرض رسالة جديدة مع تأثير
  function showMessage(text) {
    messageBox.classList.remove('fadeInOut');
    void messageBox.offsetWidth; // إعادة تفعيل الانيميشن
    messageBox.textContent = text;
    messageBox.classList.add('fadeInOut');
  }

  // جلب الاسم من localStorage أو طلبه
  function loadName() {
    const savedName = localStorage.getItem('manarName');
    if(savedName && savedName.trim() !== '') {
      welcomeName.textContent = `أهلاً يا ${savedName}! 💕`;
      inputNameContainer.style.display = 'none';
      return savedName;
    } else {
      welcomeName.textContent = '';
      inputNameContainer.style.display = 'block';
      return null;
    }
  }

  // حفظ الاسم
  saveNameBtn.addEventListener('click', () => {
    const name = inputName.value.trim();
    if(name.length > 0) {
      localStorage.setItem('manarName', name);
      welcomeName.textContent = `أهلاً يا ${name}! 💕`;
      inputNameContainer.style.display = 'none';
      showRandomMessage();
    }
  });

  // عرض رسالة عشوائية، تتجنب تكرار آخر رسالة
  function showRandomMessage() {
    let lastIndex = Number(localStorage.getItem('lastMsgIndex'));
    if (isNaN(lastIndex)) lastIndex = -1;
    let idx;
    do {
      idx = Math.floor(Math.random() * messages.length);
    } while (idx === lastIndex && messages.length > 1);
    localStorage.setItem('lastMsgIndex', idx);
    showMessage(messages[idx]);
  }

  // زر "شوف رسالة جديدة"
  newMsgBtn.addEventListener('click', () => {
    showRandomMessage();
  });

  // أول ما الصفحة تفتح
  window.addEventListener('DOMContentLoaded', () => {
    createHearts();
    const name = loadName();
    if(name) {
      showRandomMessage();
    }
  });
</script>
</body>
</html>
