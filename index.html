<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø±Ø³Ø§Ù„Ø© ØµØ¨Ø§Ø­ÙŠØ© Ù„Ù…Ù†Ø§Ø±</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet" />
<style>
  body, html {
    height: 100%;
    margin:0; padding:0;
    font-family: 'Tajawal', sans-serif;
    background: linear-gradient(135deg, #ffe6f0cc 30%, #fff0f6cc 90%);
    color: #5a2e3b;
    direction: rtl;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }
  .container {
    background: #fff0f6cc;
    max-width: 700px;
    width: 90%;
    padding: 30px 35px;
    border-radius: 25px;
    box-shadow: 0 20px 50px rgba(179, 57, 90, 0.25);
    position: relative;
    user-select: none;
  }
  h1 {
    text-align: center;
    font-weight: 900;
    color: #b3395a;
    font-size: 32px;
    margin-bottom: 10px;
    text-shadow: 1px 1px 4px rgba(179, 57, 90, 0.3);
  }
  #welcomeName {
    font-weight: 700;
    font-size: 24px;
    text-align: center;
    margin-bottom: 18px;
    color: #8a3851;
  }
  .message-box {
    background: #fff4fb;
    border-radius: 20px;
    padding: 25px 30px;
    font-size: 20px;
    line-height: 1.8;
    color: #633750;
    box-shadow: inset 0 0 15px #ffc9dd;
    min-height: 180px;
    text-align: justify;
    position: relative;
    overflow: hidden;
  }
  .fadeInOut {
    animation: fadeInOut 6s ease forwards;
  }
  @keyframes fadeInOut {
    0% {opacity: 0; transform: translateY(10px);}
    10%, 90% {opacity: 1; transform: translateY(0);}
    100% {opacity: 0; transform: translateY(-10px);}
  }
  button {
    display: block;
    margin: 30px auto 0 auto;
    padding: 14px 30px;
    font-size: 18px;
    font-weight: 700;
    color: white;
    background: linear-gradient(135deg, #d74a7e, #a33258);
    border: none;
    border-radius: 20px;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(179, 57, 90, 0.6);
    transition: transform 0.3s ease;
    user-select: none;
  }
  button:hover {
    transform: scale(1.1);
  }
  #inputNameContainer {
    margin: 20px auto 15px auto;
    max-width: 320px;
    text-align: center;
  }
  #inputName {
    width: 100%;
    padding: 12px 18px;
    font-size: 18px;
    border-radius: 18px;
    border: 2px solid #b3395a;
    outline: none;
    transition: border-color 0.3s ease;
  }
  #inputName:focus {
    border-color: #d74a7e;
    box-shadow: 0 0 8px #d74a7eaa;
  }
  #hearts {
    position: absolute;
    top: 8px;
    left: 8px;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: visible;
    z-index: 0;
  }
  .heart {
    position: absolute;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 35% 35%, #fff8, #ff7a9b);
    filter: drop-shadow(0 0 3px #ff6299cc);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    clip-path: polygon(50% 15%, 84% 43%, 79% 81%, 50% 99%, 21% 81%, 16% 43%);
    animation: floatUp 6s linear infinite;
    opacity: 0.9;
  }
  @keyframes floatUp {
    0% {transform: translateY(0) scale(0.6); opacity: 0.9;}
    50% {opacity: 0.5;}
    100% {transform: translateY(-250px) scale(1); opacity: 0;}
  }
</style>
</head>
<body>
  <div class="container" role="main" aria-label="Ø±Ø³Ø§Ù„Ø© ØµØ¨Ø§Ø­ÙŠØ© Ù„Ù…Ù†Ø§Ø±">
    <h1>ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± ÙŠØ§ Ù…Ù†Ø§Ø± ğŸ’–</h1>
    <div id="welcomeName" aria-live="polite" aria-atomic="true"></div>

    <div class="message-box" id="messageBox" aria-live="polite" aria-atomic="true">
      <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù‡ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
    </div>

    <div id="inputNameContainer" style="display:none;">
      <label for="inputName" style="font-weight:700; font-size:18px; color:#a33a5a; margin-bottom:8px; display:block;">Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§ Ø¹Ø´Ø§Ù† Ø£Ø±Ø­Ø¨ Ø¨ÙŠÙƒÙŠ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø£Ø­Ù„Ù‰:</label>
      <input type="text" id="inputName" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„Ø¬Ù…ÙŠÙ„" autocomplete="off" />
      <button id="saveNameBtn" style="margin-top:12px;">Ø§Ø­ÙØ¸ Ø§Ø³Ù…ÙŠ</button>
    </div>

    <button id="newMsgBtn" aria-label="Ø´ÙˆÙ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©">Ø´ÙˆÙ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© ğŸ’Œ</button>

    <div id="hearts"></div>
  </div>

<script>
  // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ù…ØµØ±ÙŠØ© (Ù…Ù…ÙƒÙ† ØªØ²ÙˆØ¯Ù‡Ù… Ø£Ùˆ ØªØ¹Ø¯Ù„ ÙÙŠÙ‡Ù… Ø¨Ø³Ù‡ÙˆÙ„Ø©)
  const messages = [
    "ÙŠØ§ Ù…Ù†Ø§Ø±ØŒ ÙˆØ¬ÙˆØ¯Ùƒ ÙÙŠ Ø­ÙŠØ§ØªÙŠ Ù‡Ùˆ Ø£Ø¬Ù…Ù„ Ù‡Ø¯ÙŠØ© Ø±Ø¨Ù†Ø§ Ù…Ù…ÙƒÙ† ÙŠØ¯ÙŠÙ†ÙŠ Ø¥ÙŠØ§Ù‡Ø§ØŒ ØµØ¨Ø§Ø­Ùƒ Ø³Ø¹ÙŠØ¯ ÙŠØ§ Ø­Ø¨ÙŠØ¨Ø© Ù‚Ù„Ø¨ÙŠ.",
    "ÙƒÙ„ ÙŠÙˆÙ… Ø¨ÙŠØ¹Ø¯ÙŠ Ø¨Ø­Ø³ Ù‚Ø¯ Ø¥ÙŠÙ‡ Ø£Ù†Ø§ Ù…Ø­Ø¸ÙˆØ¸ Ù„Ø£Ù†Ùƒ Ø¬Ù†Ø¨ÙŠØŒ Ø±Ø¨Ù†Ø§ ÙŠØ®Ù„ÙŠÙƒÙŠ Ù„ÙŠÙ‘Ø§ Ø¯Ø§ÙŠÙ…Ù‹Ø§.",
    "Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ ÙˆØ£ØªÙ…Ù†Ù‰ ÙŠÙƒÙˆÙ† Ù…Ù„ÙŠØ§Ù† Ø¶Ø­Ùƒ ÙˆØ­Ø¨ ÙˆØ³Ø¹Ø§Ø¯Ø© Ù„ÙŠÙƒÙŠ ÙˆÙ„Ù‚Ù„ÙˆØ¨Ù†Ø§.",
    "Ø¨Ø­Ø¨Ùƒ ÙÙˆÙ‚ Ù…Ø§ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ØªØ¹Ø¨Ø±ØŒ ÙˆØ¥Ù†ØªÙŠ Ø£Ø¬Ù…Ù„ Ø­Ø§Ø¬Ø© Ø­ØµÙ„ØªÙ„ÙŠ ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§.",
    "Ù…Ø¹ ÙƒÙ„ Ø´Ø±ÙˆÙ‚ Ø´Ù…Ø³ØŒ Ø¨Ø­Ø³ Ø¥Ù† Ø­ÙŠØ§ØªÙŠ Ø¨ØªØ¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯ ÙˆØ£Ù†ØªÙŠ ÙÙŠÙ‡Ø§ Ø£Ø­Ù„Ù‰ Ø¨Ø¯Ø§ÙŠØ©.",
  ];

  // Ø¹Ù†ØµØ± Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ø³Ù… Ù…Ù†Ø§Ø±
  const messageBox = document.getElementById('messageBox');
  const welcomeName = document.getElementById('welcomeName');
  const inputNameContainer = document.getElementById('inputNameContainer');
  const inputName = document.getElementById('inputName');
  const saveNameBtn = document.getElementById('saveNameBtn');
  const newMsgBtn = document.getElementById('newMsgBtn');
  const heartsContainer = document.getElementById('hearts');

  // ÙˆØ¸ÙŠÙØ© Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ù„ÙˆØ¨ Ù…ØªØ­Ø±ÙƒØ©
  function createHearts(count = 15) {
    heartsContainer.innerHTML = '';
    const colors = ['#ffacc1', '#ff88a2', '#ff5d7f', '#ff2a53', '#ff3d6b'];
    for(let i = 0; i < count; i++) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      const size = 12 + Math.random() * 18;
      heart.style.width = heart.style.height = size + 'px';
      heart.style.left = (Math.random() * 100) + '%';
      heart.style.top = (70 + Math.random() * 30) + '%';
      heart.style.backgroundImage = `radial-gradient(circle at 35% 35%, #fff8, ${colors[i % colors.length]})`;
      heart.style.animationDuration = (4 + Math.random() * 5) + 's';
      heart.style.transform = `translateY(0) rotate(${Math.random()*40-20}deg)`;
      heartsContainer.appendChild(heart);
    }
  }

  // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ ØªØ£Ø«ÙŠØ±
  function showMessage(text) {
    messageBox.classList.remove('fadeInOut');
    void messageBox.offsetWidth; // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†
    messageBox.textContent = text;
    messageBox.classList.add('fadeInOut');
  }

  // Ø¬Ù„Ø¨ Ø§Ù„Ø§Ø³Ù… Ù…Ù† localStorage Ø£Ùˆ Ø·Ù„Ø¨Ù‡
  function loadName() {
    const savedName = localStorage.getItem('manarName');
    if(savedName && savedName.trim() !== '') {
      welcomeName.textContent = `Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ ${savedName}! ğŸ’•`;
      inputNameContainer.style.display = 'none';
      return savedName;
    } else {
      welcomeName.textContent = '';
      inputNameContainer.style.display = 'block';
      return null;
    }
  }

  // Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù…
  saveNameBtn.addEventListener('click', () => {
    const name = inputName.value.trim();
    if(name.length > 0) {
      localStorage.setItem('manarName', name);
      welcomeName.textContent = `Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ ${name}! ğŸ’•`;
      inputNameContainer.style.display = 'none';
      showRandomMessage();
    }
  });

  // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©ØŒ ØªØªØ¬Ù†Ø¨ ØªÙƒØ±Ø§Ø± Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø©
  function showRandomMessage() {
    let lastIndex = Number(localStorage.getItem('lastMsgIndex'));
    if (isNaN(lastIndex)) lastIndex = -1;
    let idx;
    do {
      idx = Math.floor(Math.random() * messages.length);
    } while (idx === lastIndex && messages.length > 1);
    localStorage.setItem('lastMsgIndex', idx);
    showMessage(messages[idx]);
  }

  // Ø²Ø± "Ø´ÙˆÙ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"
  newMsgBtn.addEventListener('click', () => {
    showRandomMessage();
  });

  // Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„ØµÙØ­Ø© ØªÙØªØ­
  window.addEventListener('DOMContentLoaded', () => {
    createHearts();
    const name = loadName();
    if(name) {
      showRandomMessage();
    }
  });
</script>
</body>
</html>
